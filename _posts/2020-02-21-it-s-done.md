---
layout:     post
title:      It's done!
date:       2020-02-21 12:32 +0530
categories: [blogging]
tags:       [misadventure, success]
---

After various false starts over the past years and days of trial and error (and the associated misery and joy) in this instance, I'm finally at a place where I can say that -

> The blog is done!

At the very least, it's done enough that I don't feel the need to tinker with it any more[^1] to change this or that and I'm comfortable just getting on with the business of actually putting my thoughts and feelings down.

<figure class="align-center">
    <img src="{{ '/assets/img/happy.gif' | relative_url }}">
    <figcaption>Because I'm happy... :notes:</figcaption>
</figure>

So, how did I get here? Well, as I talked about in my [last post]({{ page.previous.url | relative_url }}), deployment with Netlify worked like a breeze. However, I wanted to shorten the build times just to simplify things on the server end and make everything less of a pain to setup again if need be. The setup I currently have makes this virtually painless! Here's how it works -

* The main Jekyll blog files are present in a `source` [repo](https://github.com/divayprakash/random-musings/). I clone this on my local machine and run a `bundle install` and it's ready to go
* I can create posts, add asset files, and whatever I need to do - here, in this repo. All this is saved with a `git commit`
* There is a separate `deploy` [repo](https://github.com/divayprakash/random-musings-deploy/)
* Once I'm done working, I simply run the `deploy.sh` script which does all the heavy lifting for deployment
* The [script](https://github.com/divayprakash/random-musings/blob/master/deploy.sh) runs through the following steps -
    1. Push `master` branch of `source` repo
    2. Delete old `_site` folder and create anew
    3. Clone the `deploy` repo into new `_site` folder
    4. Read details of last commit in `source` repo on local machine
    5. Build Jekyll site
    6. Switch to `_site` folder
    7. Add site files generated in step 5 in `_site` folder to index of `deploy` repo
    8. Creates commit in `deploy` repo with commit message using details extracted in step 4
    9. Push commits to `deploy` repo
    10. Delete `_site` folder
    11. As a ***bonus***
        * Print updates, divided into 3 categories - 'STATUS', 'SUCCESS', 'FAILURE'
        * Exit gracefully in case any command fails, along with an appropriate error message
* A Netlify deploy is triggered whenever the `deploy` repo is updated, copying the static website files generated by Jekyll over to Netlify's servers
* New and updated site goes live [here](https://randommusings.netlify.com/)!

The script does all this work so I don't have to. I know it's very rudimentary, but it's basic automation at its best. I'm really pleased with the results; the deploy time on Netlify has been cut down from over 5 minutes to just ***6 seconds***.

<figure class="align-center">
    <img src="{{ '/assets/img/up-to-eleven.jpg' | relative_url }}">
    <figcaption>Automation <a href="https://en.wikipedia.org/wiki/Up_to_eleven">up to 11!</a></figcaption>
</figure>

[^1]: Very much an *only at the moment* feeling, if I'm being perfectly honest. I am a perfectionist at heart so no project of mine is ever truly finished.
